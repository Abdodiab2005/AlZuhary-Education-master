# AlZuhary Education - Business Documentation

## صفحة التسجيل (Signup Page)

### ما يحدث في الواجهة (Frontend):
- يعرض نموذج يطلب من المستخدم:
  - الاسم الثلاثي
  - رقم هاتف الطالب
  - رقم هاتف ولي الأمر (اختياري)
  - السنتر
  - السنة الدراسية (أولى/تانية/تالتة ثانوي)
  - نوع الحساب (طالب/أدمن/مدرس)
  - كلمة المرور وتأكيدها
- عند الضغط على زر "تسجيل":
  - يتم التحقق أن كلمة المرور وتأكيدها متطابقتان.
  - يتم إرسال البيانات إلى السيرفر عبر API POST إلى `/api/auth/signup`:
    ```json
    {
      "name": "...",
      "phoneNumber": "...",
      "parentPhoneNumber": "...",
      "center": "...",
      "grade": "...",
      "password": "...",
      "type": "Student"
    }
    ```
  - تظهر رسالة نجاح أو خطأ حسب الرد من السيرفر.

---

## صفحة تسجيل الدخول (Signin Page)

### ما يحدث في الواجهة (Frontend):
- يعرض نموذج يطلب من المستخدم:
  - رقم الهاتف
  - كلمة المرور
- عند الضغط على زر "تسجيل الدخول":
  - يتم إرسال البيانات إلى السيرفر عبر API POST إلى `/api/auth/signin`:
    ```json
    {
      "phoneNumber": "...",
      "password": "..."
    }
    ```
  - تظهر رسالة نجاح أو خطأ حسب الرد من السيرفر.
  - في حالة النجاح يمكن حفظ التوكن أو تحويل المستخدم للصفحة الرئيسية.

---

## ما يحدث في الـ Backend

### عند التسجيل (`/api/auth/signup`):
- يستقبل السيرفر البيانات من الواجهة.
- يتحقق إذا كان رقم الهاتف موجود مسبقًا في قاعدة البيانات.
  - إذا كان موجودًا يرجع رسالة خطأ.
- إذا لم يكن موجودًا:
  - يتم تشفير كلمة المرور.
  - يتم إنشاء مستخدم جديد في قاعدة البيانات بالحقول:
    - name
    - phoneNumber (unique)
    - parentPhoneNumber
    - center
    - grade
    - password (مشفر)
    - type (Student/Admin/Teacher)
    - email (يتم توليده تلقائيًا من رقم الهاتف)
  - يرجع رسالة نجاح.

### عند تسجيل الدخول (`/api/auth/signin`):
- يستقبل السيرفر رقم الهاتف وكلمة المرور.
- يبحث عن المستخدم برقم الهاتف.
  - إذا لم يوجد يرجع رسالة خطأ.
- إذا وجد المستخدم:
  - يتحقق من كلمة المرور (مقارنة مع المشفر).
  - إذا غير متطابقة يرجع رسالة خطأ.
  - إذا متطابقة:
    - ينشئ JWT Token للمستخدم.
    - يرجع بيانات المستخدم (id, name, phoneNumber, type) مع التوكن.

---

## ملاحظات
- لا يتم استخدام الإيميل فعليًا من المستخدم، بل يتم توليده تلقائيًا في السيرفر.
- السنتر والسنة الدراسية حقول أساسية في التسجيل.
- كل العمليات تتم عبر رقم الهاتف فقط.
- جميع الاتصالات مع السيرفر تتم عبر axios من خلال ملف api.js. 